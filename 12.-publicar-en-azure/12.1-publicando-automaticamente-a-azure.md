# 12.1 Publicando automáticamente a Azure

Podemos modificar nuestro Pipeline para que al momento de que se le da commit aparte de correr las pruebas automáticas, generé el script para actualizar la base de datos, y genere los archivos necesarios para publicar en Azure \(Artifacts\). 

En el ejemplo voy a publicar los artifacts. Solo como ejemplo para demostrar diferentes formas de publicar el mismo código a diferentes servidores, voy a publicar un Artifact para desplegar los servicios en el AppService con Linux con Azure con una base de datos MySQL y también voy a generar un Artifact para publicar en un hosting windows por FTP.

Vamos a crear en una variable de tipo Secret la cadena de conexión donde vamos a tener nuestra base de datos de MySQL puedes tener la bd de MySQL en un hosting, un servidor o en Azure. Esta cadena de conexión se va a reemplazar en el momento en que generamos el  Pipeline para poder generar el script que actualizará la base de datos.

### 12.1.1 Modificando el Pipeline para generar el Artifact para publicar a Azure.

1. Entramos a Azure Devops en la opción Pipelines. Selecciona el último Pipeline y da clic en **Edit**.

![](../.gitbook/assets/image%20%28252%29.png)

2. Damos clic en el botón **Variables** para agregar una variable de tipo secret que tendra nuestra cadena de conexión, al tenerla en variable la cadena de conexión no esta disponible en el código fuente. 

![](../.gitbook/assets/image%20%28267%29.png)

3. Da clic en el botón **+** para agregar una nueva variable. En la imagen ya tengo agregada la imagen, como es de tipo secreta solo se ve el nombre pero no el valor. 

![](../.gitbook/assets/image%20%28368%29.png)

Como ejemplo voy a agregar otra variable para la base de datos de SQL de Azure. Con el nombre AzureSQLServer y en value agrego la cadena de conexión de Azure

```text
Server=tcp:armhe.database.windows.net,1433;Initial Catalog=CaducaRest;Persist Security Info=False;User ID=AdminCaduca;Password=tuPassword;MultipleActiveResultSets=False;Encrypt=True;TrustServerCertificate=False;Connection Timeout=30;
```

![](../.gitbook/assets/image%20%28161%29.png)

Puedes ver que se agrega la variable. Da clic en **Save**

![](../.gitbook/assets/image%20%28231%29.png)

