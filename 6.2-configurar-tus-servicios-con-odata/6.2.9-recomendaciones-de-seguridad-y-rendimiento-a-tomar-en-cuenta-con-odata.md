# 7.1.8 Recomendaciones de seguridad y rendimiento a tomar en cuenta con OData

Debido a que con OData practicamente permites el acceso a tus tablas debes tomar en cuenta algunas consideraciones de seguridad y rendimiento.

Si deseas restringir cierta información puedes utilizar lo siguiente:

### Ocultar ciertos campos

Si deseas que un campo no este disponible, para los select, puedes agregar el atributo **\[IgnoreDataMember\]** arriba de la propiedad que deseas ocultar.

Ejemplo: Si nuestro modelo Producto agregamos un campo Precio que deseamos que no este visible solo agrega el atributo **\[IgnoreDataMember\]**

```text
public class Producto
{

    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }

    //Otros campos 
    
    [IgnoreDataMember]
    public decimal Precio { get; set; }
} 
```

### Limitar el número de registros

Si una tabla cuenta con miles de registros se recomienda no regresar toda la información en una sola petición sino irla regresando en partes. Puedes agregar el número máximo de registros que regresará el servicio, agregando el **PageSize** en el atributo **EnableQuery**

```text
[EnableQuery(PageSize = 10)]
public IActionResult Get()
{
    var clientes = _context.Cliente;
    return Ok(clientes);
}
```

De esta forma si desean obtener mas de 10 registros, solo se regresan los primeros 10 registros

```text
http://localhost:5000/odata/Clientes?$top=15
```

El servicio solo regresará los primeros 10 clientes.

### Limitar Opciones de Consulta

Debes tomar en cuenta que los usuarios pueden realizar consultas por cualquier campo, por lo cual si una tabla tiene muchos campos, se pueden realizar filtros por campos que no tengan índices. 

Puedes agregar las opciones que deseas permitir en tu servicio en el atributo Queryable mediante \| puedes ir agregando las opciones que permites en tu servicio.

En este ejemplo solo permites que se use el método Skip y el Top

```csharp
using Microsoft.AspNet.OData.Query;

[EnableQuery(PageSize = 10,
             AllowedQueryOptions =  AllowedQueryOptions.Skip |
                                     AllowedQueryOptions.Top)]       
public IActionResult Get()
```



